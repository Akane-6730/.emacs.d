% ~/.emacs.d/org/setup/beamer/zju/style-zju.tex

% ============================================================
% ZJU Beamer Theme Style File
% ============================================================

% ============================================================
% 1. Global Dependencies
% ============================================================

% --- Basic & Localization ---
\setmainfont[Scale=1.1]{Libertinus Serif}   % English Main Font
\setCJKmainfont[                                % Chinese Main Font
    UprightFont = * SemiBold,                     % Fix "too thin" on projector
    BoldFont    = * Heavy                         % Ensure sufficient contrast
]{Source Han Serif CN}
\usepackage[normalem]{ulem}                     % Underline support

% --- Math ---
\usepackage{amsmath,amsfonts,amssymb,bm}        % Advanced math symbols and bold math

% --- Graphics & Tables ---
\usepackage{graphicx,hyperref,url}              % Graphics inclusion and hyperlinks
\usepackage{booktabs}                           % Professional tables (toprule, midrule, bottomrule)
\usepackage{array}                              % Extended table column formatting

% --- Global Graphics Settings ---
\setkeys{Gin}{width=0.9\textwidth,height=0.8\textheight,keepaspectratio}

% ============================================================
% 2. Code Highlighting (Minted)
% ============================================================
\usepackage{minted}
\usemintedstyle{solarized-light}
\setmonofont{Consolas}                          % Monospace font for code
\setminted{fontsize=\footnotesize}              % Code block font size

% ============================================================
% 3. Theme Appearance
% ============================================================
\mode<presentation> {

    % --- Fonts & Inner/Outer Themes ---
    \usefonttheme{serif}                          % Serif font theme
    \usefonttheme{professionalfonts}              % Prevent Beamer from overwriting math fonts
    \useinnertheme[shadow]{rounded}               % Rounded corners with shadows for blocks

    \setbeamerfont{frametitle}{series=\bfseries}
    \setbeamerfont{block title}{series=\bfseries}

    % --- Color Palette (ZJU Blue) ---
    \definecolor{ZJUBlue}{RGB}{0,63,136}          % ZJU Official Blue
    \usecolortheme[named=ZJUBlue]{structure}      % Set structural color

    \setbeamercolor{block title}{bg=ZJUBlue,fg=white}
    \setbeamercolor{block body}{bg=ZJUBlue!10!white}

    % --- Component Styling ---
    \setbeamertemplate{itemize item}[circle]
    \setbeamertemplate{itemize subitem}[circle]
    \setbeamertemplate{itemize subsubitem}[circle]

    \setbeamertemplate{enumerate item}{\insertenumlabel.}
    \setbeamertemplate{enumerate subitem}{\insertenumlabel.\insertsubenumlabel}
    \setbeamertemplate{enumerate subsubitem}{\insertenumlabel.\insertsubenumlabel.\insertsubsubenumlabel}

    % --- Navigation ---
    \setbeamertemplate{navigation symbols}{}      % Disable bottom navigation symbols

    % --- Footline Setup ---
    % Font size for page numbers
    \setbeamerfont{page number in head/foot}{size=\small}

    % Custom footline with frame number at bottom right
    \setbeamertemplate{footline}{
        \hbox to \paperwidth{
            \hfill                                    % Push to right
            \usebeamerfont{page number in head/foot}
            \insertframenumber\,/\,\inserttotalframenumber
            \hspace{0.3em}                            % Right margin adjustment
        }%
        \vskip1em                                   % Bottom margin
    }
}

% ============================================================
% 4. Background & Title Graphics
% ============================================================
% Slide Background
\pgfdeclareimage[width=\paperwidth,height=\paperheight]{bg}{\ZjuRoot res/zju_background}
\usebackgroundtemplate{\pgfuseimage{bg}}

% Title Page Logo
\pgfdeclareimage[height=1.3cm]{title}{\ZjuRoot res/zju_title}
\titlegraphic{\pgfuseimage{title}}

% ============================================================
% 5. Institute & Contact Info
% ============================================================
\institute{
% Email
{\normalsize \href{mailto:lin.shao@zju.edu.cn}{\rmfamily lin.shao@zju.edu.cn}}
\\[2em]
% Affiliation
{\normalsize 计算机科学与技术学院} \\
}

% ============================================================
% 6. Typography & Localization Adjustments
% ============================================================
% Alerted text styling
\setbeamercolor{alerted text}{fg=black}
\setbeamerfont{alerted text}{series=\bfseries}

% Chinese Punctuation Swap (Full-stop '。' -> Solid dot '．')
\catcode`\。=\active
\newcommand{。}{．}

% ============================================================
% 7. Document Hooks
% ============================================================
% Auto-insert Outline at the beginning of each section
\AtBeginSection[]{
    \begin{frame}
        \frametitle{Outline}
        \tableofcontents[currentsection]
    \end{frame}
}

% Auto-insert Thank You slide at the end
\AtEndDocument{
    \begin{frame}[c, plain]
        \centering
        \Huge \bfseries Thank You!
    \end{frame}
}
